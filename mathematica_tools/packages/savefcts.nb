(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 12.3' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[      8515,        204]
NotebookOptionsPosition[      7791,        183]
NotebookOutlinePosition[      8219,        200]
CellTagsIndexPosition[      8176,        197]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell[BoxData[
 RowBox[{"\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"BeginPackage", "[", "\"\<savefcts`\>\"", "]"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"savefunc", "::", "usage"}], "=", "\"\< save results\>\""}], 
    ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"Begin", "[", "\"\<`Private`\>\"", "]"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Get", "[", 
     RowBox[{
      RowBox[{"NotebookDirectory", "[", "]"}], "<>", "\"\<globalvars.m\>\""}],
      "]"}], " ", ";"}], "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{"Save", " ", "output", " ", "in", " ", "a", " ", "format", " ", 
     RowBox[{"that", "'"}], "s", " ", "easy", " ", "to", " ", "use", " ", 
     "in", " ", "C", " ", "code"}], "*)"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"savefunc", "[", 
      RowBox[{
      "SM0_", ",", "UnSM0_", ",", "Symdivergences0_", ",", 
       "UnSymdivergences0_", ",", "biases0_"}], "]"}], ":=", 
     RowBox[{"Module", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"SM", "=", "SM0"}], ",", 
         RowBox[{"UnSM", "=", "UnSM0"}], ",", 
         RowBox[{"Symdivergences", "=", "Symdivergences0"}], ",", 
         RowBox[{"UnSymdivergences", "=", "UnSymdivergences0"}], ",", 
         RowBox[{"biases", "=", "biases0"}]}], "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"n", "=", 
         RowBox[{"Length", "[", "SM", "]"}]}], ";", "\[IndentingNewLine]", 
        RowBox[{"fileName", "=", "\"\<savefile.txt\>\""}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"Export", "[", 
         RowBox[{"fileName", ",", "\"\<\>\""}], "]"}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"file", "=", 
         RowBox[{"OpenAppend", "[", 
          RowBox[{"fileName", ",", 
           RowBox[{"PageWidth", "->", "Infinity"}]}], "]"}]}], ";", 
        "\[IndentingNewLine]", "\[IndentingNewLine]", 
        RowBox[{"For", "[", 
         RowBox[{
          RowBox[{"b", "=", "1"}], ",", 
          RowBox[{"b", "<", 
           RowBox[{
            RowBox[{"Length", "[", "biases", "]"}], "+", "1"}]}], ",", 
          RowBox[{"b", "++"}], ",", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"tosave", "=", 
            RowBox[{"\"\<nu\>\"", "<>", 
             RowBox[{"ToString", "[", "b", "]"}], "<>", "\"\<=\>\"", "<>", 
             RowBox[{"ToString", "[", 
              RowBox[{"CForm", "[", 
               RowBox[{"biases", "[", 
                RowBox[{"[", "b", "]"}], "]"}], "]"}], "]"}], "<>", 
             "\"\<;\>\""}]}], ";", "\[IndentingNewLine]", 
           RowBox[{"WriteString", "[", 
            RowBox[{"file", ",", "tosave", ",", "\"\<\\n\>\""}], "]"}], 
           ";"}]}], "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
        "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"saveMdata", "[", 
          RowBox[{"dataname0_", ",", "datamatr0_"}], "]"}], ":=", 
         RowBox[{"Module", "[", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{
             RowBox[{"dataname", "=", "dataname0"}], ",", 
             RowBox[{"datamatr", "=", "datamatr0"}]}], "}"}], ",", 
           "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"For", "[", 
             RowBox[{
              RowBox[{"i", "=", "1"}], ",", 
              RowBox[{"i", "<", 
               RowBox[{"n", "+", "1"}]}], ",", 
              RowBox[{"i", "++"}], ",", 
              RowBox[{
               RowBox[{"For", "[", 
                RowBox[{
                 RowBox[{"j", "=", "1"}], ",", 
                 RowBox[{"j", "<", 
                  RowBox[{"n", "+", "1"}]}], ",", 
                 RowBox[{"j", "++"}], ",", "\[IndentingNewLine]", 
                 RowBox[{
                  RowBox[{"datai", "=", 
                   RowBox[{
                    RowBox[{"datamatr", "[", 
                    RowBox[{"[", 
                    RowBox[{"i", ",", "j"}], "]"}], "]"}], "/.", " ", 
                    RowBox[{"x_Integer", ":>", 
                    RowBox[{"N", "[", "x", "]"}]}]}]}], ";", 
                  "\[IndentingNewLine]", 
                  RowBox[{"term", "=", 
                   RowBox[{"dataname", "<>", 
                    RowBox[{"ToString", "[", "i", "]"}], "<>", "\"\<,\>\"", "<>", 
                    RowBox[{"ToString", "[", "j", "]"}], "<>", 
                    "\"\<]\>\""}]}], ";", "\[IndentingNewLine]", 
                  "\[IndentingNewLine]", 
                  RowBox[{"tosave", "=", 
                   RowBox[{"term", "<>", "\"\<=\>\"", "<>", 
                    RowBox[{"ToString", "[", 
                    RowBox[{"CForm", "[", "datai", "]"}], "]"}], "<>", 
                    "\"\<;\>\""}]}], ";", "\[IndentingNewLine]", 
                  RowBox[{"WriteString", "[", 
                   RowBox[{"file", ",", "tosave", ",", "\"\<\\n\>\""}], 
                   "]"}]}]}], "\[IndentingNewLine]", "]"}], ";"}]}], "]"}], 
            ";"}]}], "\[IndentingNewLine]", "]"}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"saveMdata", "[", 
         RowBox[{"\"\<Sym\>\"", ",", "SM"}], "]"}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"saveMdata", "[", 
         RowBox[{"\"\<UnSym\>\"", ",", "UnSM"}], "]"}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"saveMdata", "[", 
         RowBox[{"\"\<SymDivs\>\"", ",", "Symdivergences"}], "]"}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"saveMdata", "[", 
         RowBox[{"\"\<UnSymDivs\>\"", ",", "UnSymdivergences"}], "]"}], ";", 
        "\[IndentingNewLine]", "\[IndentingNewLine]", 
        RowBox[{"Close", "[", "file", "]"}], ";"}]}], "\[IndentingNewLine]", 
      "]"}]}], ";"}], "\[IndentingNewLine]", " ", "\[IndentingNewLine]", 
   RowBox[{"End", "[", "]"}], " ", "\n", " ", "\[IndentingNewLine]", 
   RowBox[{"EndPackage", "[", "]"}]}]}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.928922781131001*^9, 3.928922812242719*^9}, {
   3.928922857773096*^9, 3.928922931819728*^9}, {3.928922977382791*^9, 
   3.928923026698432*^9}, {3.929614922410539*^9, 3.929614997904499*^9}, {
   3.929615049576499*^9, 3.929615140224756*^9}, {3.929615417140625*^9, 
   3.929615430210005*^9}, {3.9296982808439827`*^9, 3.929698334019541*^9}, {
   3.929698423956302*^9, 3.9296988856643257`*^9}, {3.92969899901423*^9, 
   3.929699081111315*^9}, {3.930814962228971*^9, 3.930814972324897*^9}, 
   3.931431705945134*^9},ExpressionUUID->"c85ae220-2e7f-484d-83ec-\
ac9a3365f0db"],

Cell[BoxData["\<\"savefcts`\"\>"], "Output",
 CellChangeTimes->{{3.928923067331491*^9, 3.928923068530805*^9}},
 CellLabel->
  "Out[917]=",ExpressionUUID->"99b8c427-b7a2-48df-90af-640e6f9c7bf0"],

Cell[BoxData["\<\"savefcts`Private`\"\>"], "Output",
 CellChangeTimes->{{3.928923067331491*^9, 3.928923068538994*^9}},
 CellLabel->
  "Out[919]=",ExpressionUUID->"6b4642f6-1175-4aff-a3c6-50b13209e353"],

Cell[BoxData["\<\"savefcts`Private`\"\>"], "Output",
 CellChangeTimes->{{3.928923067331491*^9, 3.928923068546495*^9}},
 CellLabel->
  "Out[921]=",ExpressionUUID->"de6b6c70-96ac-4074-9673-97d445bfda9b"]
}, Open  ]]
},
AutoGeneratedPackage->Automatic,
WindowSize->{693.75, 762},
WindowMargins->{{0, Automatic}, {Automatic, 0}},
FrontEndVersion->"14.0 for Linux x86 (64-bit) (December 12, 2023)",
StyleDefinitions->"Default.nb",
ExpressionUUID->"ec00e7c6-b015-4043-b977-e28294123c14"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[580, 22, 6591, 143, 901, "Input",ExpressionUUID->"c85ae220-2e7f-484d-83ec-ac9a3365f0db",
 InitializationCell->True],
Cell[7174, 167, 193, 3, 33, "Output",ExpressionUUID->"99b8c427-b7a2-48df-90af-640e6f9c7bf0"],
Cell[7370, 172, 201, 3, 33, "Output",ExpressionUUID->"6b4642f6-1175-4aff-a3c6-50b13209e353"],
Cell[7574, 177, 201, 3, 33, "Output",ExpressionUUID->"de6b6c70-96ac-4074-9673-97d445bfda9b"]
}, Open  ]]
}
]
*)

